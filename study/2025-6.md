# echarts xAxis type=time

time 作为目录

```js
const options = {
  xAxis: {
    type: 'time'
  },
  series: [
    {
      type: 'line',
      data: [
        ['2025-01-01 00:00:00', 1],
        ['2025-01-01 01:00:00', 2],
        ['2025-01-01 02:00:00', 3]
      ]
    }
  ]
};
```

# echarts 自定义系列 风场图

https://echarts.apache.org/examples/zh/editor.html?c=custom-wind

```js
function shuffle(array) {
  // https://stackoverflow.com/questions/2450954/how-to-randomize-shuffle-a-javascript-array
  var currentIndex = array.length;
  var temporaryValue;
  var randomIndex;
  // While there remain elements to shuffle...
  while (0 !== currentIndex) {
    // Pick a remaining element...
    randomIndex = Math.floor(Math.random() * currentIndex);
    currentIndex -= 1;
    // And swap it with the current element.
    temporaryValue = array[currentIndex];
    array[currentIndex] = array[randomIndex];
    array[randomIndex] = temporaryValue;
  }
  return array;
}
$.getJSON(ROOT_PATH + '/data-gl/asset/data/winds.json', function (windData) {
  var p = 0;
  var maxMag = 0;
  var minMag = Infinity;
  var data = [];
  for (var j = 0; j < windData.ny; j++) {
    for (var i = 0; i < windData.nx; i++, p++) {
      var vx = windData.data[p][0];
      var vy = windData.data[p][1];
      var mag = Math.sqrt(vx * vx + vy * vy);
      // 数据是一个一维数组
      // [ [经度, 维度，向量经度方向的值，向量维度方向的值] ]
      data.push([(i / windData.nx) * 360 - 180, (j / windData.ny) * 180 - 90, vx, vy, mag]);
      maxMag = Math.max(mag, maxMag);
      minMag = Math.min(mag, minMag);
    }
  }
  shuffle(data);
  myChart.setOption(
    (option = {
      backgroundColor: '#333',
      visualMap: {
        left: 'center',
        min: minMag,
        max: maxMag,
        dimension: 4,
        inRange: {
          // prettier-ignore
          color: ['#313695', '#4575b4', '#74add1', '#abd9e9', '#e0f3f8', '#ffffbf', '#fee090', '#fdae61', '#f46d43', '#d73027', '#a50026']
        },
        calculable: true,
        textStyle: {
          color: '#fff'
        },
        orient: 'horizontal'
      },
      geo: {
        map: 'world',
        left: 0,
        right: 0,
        top: 0,
        zoom: 1,
        silent: true,
        roam: true,
        itemStyle: {
          areaColor: '#323c48',
          borderColor: '#111'
        }
      },
      series: {
        type: 'custom',
        coordinateSystem: 'geo',
        data: data,
        encode: {
          x: 0,
          y: 0
        },
        renderItem: function (params, api) {
          const x = api.value(0);
          const y = api.value(1);
          const dx = api.value(2);
          const dy = api.value(3);
          const start = api.coord([Math.max(x - dx / 5, -180), Math.max(y - dy / 5, -90)]);
          const end = api.coord([Math.min(x + dx / 5, 180), Math.min(y + dy / 5, 90)]);
          return {
            type: 'line',
            shape: {
              x1: start[0],
              y1: start[1],
              x2: end[0],
              y2: end[1]
            },
            style: {
              lineWidth: 0.5,
              stroke: api.visual('color')
            }
          };
        },
        progressive: 2000
      }
    })
  );
});
```

# echarts 自定义系列 性能分析图

https://echarts.apache.org/examples/zh/editor.html?c=custom-profile

```js
var data = [];
var dataCount = 10;
var startTime = +new Date();
var categories = ['categoryA', 'categoryB', 'categoryC'];
var types = [
  {name: 'JS Heap', color: '#7b9ce1'},
  {name: 'Documents', color: '#bd6d6c'},
  {name: 'Nodes', color: '#75d874'},
  {name: 'Listeners', color: '#e0bc78'},
  {name: 'GPU Memory', color: '#dc77dc'},
  {name: 'GPU', color: '#72b362'}
];
// Generate mock data
categories.forEach(function (category, index) {
  var baseTime = startTime;
  for (var i = 0; i < dataCount; i++) {
    var typeItem = types[Math.round(Math.random() * (types.length - 1))];
    var duration = Math.round(Math.random() * 10000);
    data.push({
      name: typeItem.name,
      value: [index, baseTime, (baseTime += duration), duration],
      itemStyle: {
        normal: {
          color: typeItem.color
        }
      }
    });
    baseTime += Math.round(Math.random() * 2000);
  }
});
function renderItem(params, api) {
  var categoryIndex = api.value(0);
  var start = api.coord([api.value(1), categoryIndex]);
  var end = api.coord([api.value(2), categoryIndex]);
  var height = api.size([0, 1])[1] * 0.6;
  var rectShape = echarts.graphic.clipRectByRect(
    {
      x: start[0],
      y: start[1] - height / 2,
      width: end[0] - start[0],
      height: height
    },
    {
      x: params.coordSys.x,
      y: params.coordSys.y,
      width: params.coordSys.width,
      height: params.coordSys.height
    }
  );
  return (
    rectShape && {
      type: 'rect',
      transition: ['shape'],
      shape: rectShape,
      style: api.style()
    }
  );
}
option = {
  tooltip: {
    formatter: function (params) {
      return params.marker + params.name + ': ' + params.value[3] + ' ms';
    }
  },
  title: {
    text: 'Profile',
    left: 'center'
  },
  dataZoom: [
    {
      type: 'slider',
      filterMode: 'weakFilter',
      showDataShadow: false,
      top: 400,
      labelFormatter: ''
    },
    {
      type: 'inside',
      filterMode: 'weakFilter'
    }
  ],
  grid: {
    height: 300
  },
  xAxis: {
    min: startTime,
    scale: true,
    axisLabel: {
      formatter: function (val) {
        return Math.max(0, val - startTime) + ' ms';
      }
    }
  },
  yAxis: {
    data: categories
  },
  series: [
    {
      type: 'custom',
      renderItem: renderItem,
      itemStyle: {
        opacity: 0.8
      },
      encode: {
        x: [1, 2],
        y: 0
      },
      data: data
    }
  ]
};
```

# 图片格式转换

https://zhuanlan.zhihu.com/p/138244649

# npm 发包

```sh
# 获取registry
npm config get registry
# 设置registry
npm config set registry https://registry.npmjs.org/
# 登录
npm login
# 发布
npm publish
```

# echarts 自定义系列

https://www.isqqw.com/echarts-doc/zh/tutorial.html#%E8%87%AA%E5%AE%9A%E4%B9%89%E7%B3%BB%E5%88%97

# HTTP1.0、HTTP1.1 、HTTP2.0 和 HTTP3.0 的区别

https://zhuanlan.zhihu.com/p/102561034
https://cloud.tencent.com/developer/article/2374334

# React 18 与 React 19 区别

https://mp.weixin.qq.com/s/DS5zqeWYHf5fl7N6i8BorA

# 投屏

https://juejin.cn/post/7490588889947865142

# Reading Code - React

https://alexkondov.com/readint-source-code-react/

https://github.com/numbbbbb/read-react-source-code/tree/master
https://www.bilibili.com/video/BV13m4y167K1/?vd_source=4bb84d50264820271b856dbadb828a82

# React Router

https://reactrouter.com/home

# React 16.9

https://xiaoxiaosaohuo.github.io/react-books/

# 图解 React 17

https://7km.top/main/macro-structure
https://github.com/lizuncong/mini-react

# React 设计原理

https://codingwithalice.github.io/2023/11/13/React%E8%AE%BE%E8%AE%A1%E5%8E%9F%E7%90%86-Part-1-%E7%90%86%E5%BF%B5%E7%AF%87/
https://www.bookstack.cn/read/React-design/README.md
https://github.com/BetaSu/big-react
https://matrix-the-one.github.io/web/note/books/React-Design/#

# React-typescript

https://react-typescript-cheatsheet.netlify.app/docs/basic/getting-started/basic_type_example

# Leaflet 百度坐标

http://tiven.wang/articles/use-baidu-map-provider-in-leafletjs/

```js
/**
 * Projection class for Baidu Spherical Mercator
 *
 * @class BaiduSphericalMercator
 */
L.Projection.BaiduSphericalMercator = {
    /**
     * Project latLng to point coordinate
     *
     * @method project
     * @param {Object} latLng coordinate for a point on earth
     * @return {Object} leafletPoint point coordinate of L.Point
     */
    project: function(latLng) {
        var projection = new BMap.MercatorProjection();
        var originalPoint = new BMap.Point(latLng.lng, latLng.lat);
        var point = projection.lngLatToPoint(originalPoint);
        var leafletPoint = new L.Point(point.x, point.y);
        return leafletPoint;
    },

    /**
     * unproject point coordinate to latLng
     *
     * @method unproject
     * @param {Object} bpoint baidu point coordinate
     * @return {Object} latitude and longitude
     */
    unproject: function (bpoint) {
        var projection= new BMap.MercatorProjection();
        var point = projection.pointToLngLat(
            new BMap.Pixel(bpoint.x, bpoint.y)
        );
        var latLng = new L.LatLng(point.lat, point.lng);
        return latLng;
    },

    /**
     * this is the range of coordinate.
     * Range of pixel coordinate is gotten from
     * BMap.MercatorProjection.lngLatToPoint(180, -90) and (180, 90)
     * After getting max min value of pixel coordinate, use
     * pointToLngLat() get the max lat and Lng.
     */
    bounds: (function () {
        var MAX_X= 20037726.37;
        var MIN_Y= -11708041.66;
        var MAX_Y= 12474104.17;
        var bounds = L.bounds(
            [-MAX_X, MIN_Y], //-180, -71.988531
            [MAX_X, MAX_Y]  //180, 74.000022
        );
        var MAX = 33554432;
        bounds = new L.Bounds(
            [-MAX, -MAX],
            [MAX, MAX]
        );
        return bounds;
    })()
};

/**
 * Coordinate system for Baidu EPSG3857
 *
 * @class BEPSG3857
 */
L.CRS.EPSGB3857 = L.extend({}, L.CRS, {
  code: 'EPSG:B3857',
  projection: L.Projection.BaiduSphericalMercator,

  transformation: (function () {
      var z = -18 - 8;
      var scale = Math.pow(2, z);
      return new L.Transformation(scale, 0.5, -scale, 0.5);
  }())
});


getTileUrl: function (coords) {
    var offset = Math.pow(2, coords.z - 1),
        x = coords.x - offset,
        y = offset - coords.y - 1,
        baiduCoords = L.point(x, y);
    baiduCoords.z = coords.z;
    return L.TileLayer.prototype.getTileUrl.call(this, baiduCoords);
}

L.TileLayer.BaiduLayer.desc = {
    Normal: {
        Map: 'http://online{s}.map.bdimg.com/tile/?qt=tile&x={x}&y={y}&z={z}&styles=pl'
    },
    Satellite: {
        Map: 'http://shangetu{s}.map.bdimg.com/it/u=x={x};y={y};z={z};v=009;type=sate&fm=46',
        Road: 'http://online{s}.map.bdimg.com/tile/?qt=tile&x={x}&y={y}&z={z}&styles=sl'
    },
    subdomains: '0123456789'
};
```

# webpack5-react-ts

https://github.com/guojiongwei/webpack5-react-ts

# Leaflet.markercluster

https://leaflet.github.io/Leaflet.markercluster/#all-options

# shader 龙珠 DragonBall

https://www.shadertoy.com/view/Mtd3DB

# 海康视频截图

用 websocket 消息推送接收，`type=3`即截图消息，picData 即截图 base64

`data:image/jpeg;base64,`

```js
oWebControl
  .JS_RequestInterface({
    funcName: 'snapShot',
    argument: JSON.stringify({name: 'D:\test.jpg'})
  })
  .then((res) => {
    console.log('🚀 ~ demo_window_simple_preview.html ~ .then ~ res:', res);
  });

oWebControl.JS_SetWindowControlCallback({
  cbIntegrationCallBack: cbIntegrationCallBack
});

// 推送消息
function cbIntegrationCallBack(oData) {
  const res = oData.responseMsg;
  if (res.type == 3) {
    console.log('🚀 ~ demo_window_simple_preview.html ~ showCBInfo ~ res:', res);
  }
}
```

# React ErrorBoundary

https://zhuanlan.zhihu.com/p/673677788

# React aHooks

https://ahooks.js.org/zh-CN/hooks/use-infinite-scroll

# 微前端实现原理

https://b3logfile.com/pdf/article/1611246439825.pdf

https://liyucang-git.github.io/2023/08/05/%E5%BE%AE%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF%E5%8E%9F%E7%90%86/

https://zhuanlan.zhihu.com/p/667436811

https://zhuanlan.zhihu.com/p/643639698

https://github.com/phodal/microfrontends

https://juejin.cn/post/7099339595233361934
https://www.garfishjs.org/blog/architecture.html
https://juejin.cn/post/7132339270820724743
https://bubuzou.com/2024/02/02/micro-desc/
https://mp.weixin.qq.com/s?__biz=MzkyOTIwMjU2NQ==&mid=2247483707&idx=2&sn=57cd7576c62692c4bfdb5df69c889bfc

# webpack devServer 实现原理

https://cloud.tencent.com/developer/article/1742015

https://zhuanlan.zhihu.com/p/657683149

## 1. webpack-dev-middleware 是什么、如何进行工作的。

webpack-dev-middleware 是一个容器(wrapper)，它会将 webpack 编译后的文件存储到内存中，然后在用户访问 express 服务时，将内存中对应的资源输出返回。

1.  webpack-dev-server 会用 webpack 进行实时编译，再用 webpack-dev-middleware 将 webpack 编译后文件会输出到内存中。可以将 webpack-dev-middleware 看作一个内存型的文件系统，目录与内存中的产物会形成映射关系。

2.  当我们访问 express 服务时，express 会将请求转发给 webpack-dev-middleware，webpack-dev-middleware 会根据映射关系，找到对应的文件，再将文件内容返回给 express。

## 2. webpack-dev-server 是什么、如何进行工作的、实现原理是什么。

webpack-dev-server 是 webpack 官方推出的一款开发工具，这款工具可以实现代码修改后自动编译、自动打包，自动刷新浏览器的功能。

webpack-dev-server 会将打包后的产物放入内存中，这样就大大提升了 构建速度 与 访问速度，同时也不会有磁盘的 IO 开销，延长硬盘使用寿命。

## 3. webpack-dev-server 常用配置项 static、hot、proxy 重点解读。

## 4. webpack-dev-server 如何使用、其他常用配置项设置。

# Intl 字符串对比、数字格式化，和日期时间格式化

https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Intl

## Intl.Collator 字符串排序

```js
console.log('我是中国人啊'.split('').sort(new Intl.Collator('pinyin').compare));
//['啊', '国', '人', '是', '我', '中'];
```

## Intl.DateTimeFormat 时间格式化

```js
new Intl.DateTimeFormat(navigator.language || 'zh-CN', {
  year: 'numeric',
  month: '2-digit',
  day: '2-digit',
  hour: '2-digit',
  minute: '2-digit',
  second: '2-digit',
  timeZone: 'Asia/Shanghai',
  hourCycle: 'h24'
}).format(date);
//2025/06/26 10:32:38
```

## Intl.DisplayNames 展示类型

获取地区

```js
const toEnglisth = new Intl.DisplayNames(['en'], {type: 'region'});
const toChinese = new Intl.DisplayNames(['zh-Hant'], {
  type: 'region'
});
toEnglisth.of('US'); //"United States"
toChinese.of('US'); //"美國"
```

## Intl.NumberFormat 数值格式化

货币

```js
new Intl.NumberFormat(navigator.language || 'zh-CN', {style: 'currency', currency: 'CNY'}).format(
  100000
); //'¥100,000.00'
```
