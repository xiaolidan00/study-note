# webcomponent è¡¨å• input

https://developer.mozilla.org/zh-CN/docs/Learn_web_development/Extensions/Forms/Form_validation
https://www.hi-arkin.com/archives/WCs-form.html
https://kinsta.com/de/blog/web-komponenten/
https://dev.to/stuffbreaker/custom-forms-with-web-components-and-elementinternals-4jaj
https://segmentfault.com/a/1190000044813261
https://www.telerik.com/blogs/web-components-101-an-introduction-to-web-components
https://github.com/mdn/web-components-examples
https://javascript.info/shadow-dom-events
https://zh.javascript.info/web-components

# awesome-web-components

https://github.com/obetomuniz/awesome-webcomponents
https://github.com/web-padawan/awesome-web-components

# shadowRoot æ ·å¼éš”ç¦»

https://developer.mozilla.org/en-US/docs/Web/CSS/:host

## 1. webcomponents

https://html.spec.whatwg.org/multipage/custom-elements.html#custom-element-conformance

## 2. ç”Ÿå‘½å‘¨æœŸ

- `connectedCallback()`ï¼šæ¯å½“å…ƒç´ æ·»åŠ åˆ°æ–‡æ¡£ä¸­æ—¶è°ƒç”¨ã€‚è§„èŒƒå»ºè®®å¼€å‘äººå‘˜å°½å¯èƒ½åœ¨æ­¤å›è°ƒä¸­å®ç°è‡ªå®šä¹‰å…ƒç´ çš„è®¾å®šï¼Œè€Œä¸æ˜¯åœ¨æ„é€ å‡½æ•°ä¸­å®ç°ã€‚
- `disconnectedCallback()`ï¼šæ¯å½“å…ƒç´ ä»æ–‡æ¡£ä¸­ç§»é™¤æ—¶è°ƒç”¨ã€‚
- `adoptedCallback()`ï¼šæ¯å½“å…ƒç´ è¢«ç§»åŠ¨åˆ°æ–°æ–‡æ¡£ä¸­æ—¶è°ƒç”¨ã€‚
- `attributeChangedCallback()`ï¼šåœ¨å±æ€§æ›´æ”¹ã€æ·»åŠ ã€ç§»é™¤æˆ–æ›¿æ¢æ—¶è°ƒç”¨ã€‚æœ‰å…³æ­¤å›è°ƒçš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§[å“åº”å±æ€§å˜åŒ–](https://developer.mozilla.org/zh-CN/docs/Web/API/Web_components/Using_custom_elements#å“åº”å±æ€§å˜åŒ–)ã€‚

## 3. Shadow DOM

## 4. Scoped Style

## 5. webcomponents äº‹ä»¶

## 6. template slot

## 7. è¾“å…¥ç»„ä»¶

## 8.

# webcomponents ç»„ä»¶åº“

https://github.com/Tencent/omi
https://github.com/HTMLElements/smart-webcomponents

https://github.com/hellof2e/quark-design

# å†…å­˜æ³„æ¼æ’æŸ¥

https://ruanyifeng.com/blog/2017/04/memory-leak.html

è‡ªå¸¦å·¥å…·

1. Performance
2. Lighthouse
3. Memory(å¯¹æ¯”ä¸¤æ¬¡å¿«ç…§ï¼Œè¿‡æ»¤å‡º detached)
4. ä»»åŠ¡ç®¡ç†å™¨
5. æ€§èƒ½ç›‘æ§
6. detach

webpack-bundle-analyzer

# apifox

api
https://api.apifox.com/api/v1/api-details?locale=zh-CN

æ•°æ®æ ¼å¼
https://api.apifox.com/api/v1/projects/{id}/data-schemas?locale=zh-CN

æ–‡ä»¶å¤¹
https://api.apifox.com/api/v1/projects/{id}/api-tree-list?locale=zh-CN

ç”Ÿæˆ api æ–‡æ¡£

```js
const apiList = require('./api.json');
const fs = require('fs');
const keyname = 'å¤§å±';
const prefix = '/data';
const prefix1 = '/data1';
let str = "import request from '@/utils/request';";

function dfsApi(item, parent) {
  if (item.type == 'apiDetail') {
    const api = item.api;
    const fun = api.path
      .replace(/\{[a-zA-Z]+\}/g, (a) => {
        return a.substring(1, a.length - 1);
      })
      .replace(/([-/][a-z])/g, (str) => {
        const a = str[1];
        return a.toUpperCase();
      });
    let body = '';
    let url = api.path;
    let isPath = false;
    if (/\{[a-zA-Z]+\}/g.test(api.path)) {
      url = url.replace(/\{[a-zA-Z]+\}/g, '${id}');
      isPath = true;
    }

    if (api.method == 'post') {
      body = `request({url:\`/api${parent.name == 'ä¿¡æ¯ç®¡ç†' ? prefix1 : prefix}${url}\`,method:'${
        api.method
      }',data})`;
    } else {
      body = `request({url:\`/api${parent.name == 'ä¿¡æ¯ç®¡ç†' ? prefix1 : prefix}${url}\`,method:'${
        api.method
      }',params:data})`;
    }

    if (isPath) {
      str += `\n/**${item.name}**/\nexport function ${api.method}${fun}(id,data){return ${body}}\n`;
    } else {
      str += `\n/**${item.name}**/\nexport function ${api.method}${fun}(data){return ${body}}\n`;
    }
  } else if (item.children) {
    item.children.forEach((a) => {
      dfsApi(a, item);
    });
  }
}
function main() {
  const apiItem = apiList.data.find((it) => it.name == keyname);
  if (apiItem) {
    dfsApi(apiItem, {});
  }
  fs.writeFileSync('./screen.js', str);
}
main();
```

# echarts é«˜äº®åŒºåŸŸå’Œä¸åŒå€¼ä¸åŒé¢œè‰²

https://echarts.apache.org/examples/zh/editor.html?c=line-sections

# webpack devServer Proxy

https://www.webpackjs.com/configuration/dev-server/#devserverproxy

# WebGL Inspector

[WebGL Inspector](https://benvanik.github.io/WebGL-Inspector/)

# three.js devTools

https://github.com/threejs/three-devtools

# AudioContext éŸ³é¢‘å¤„ç†

https://juejin.cn/post/7365698962532204582
https://developer.mozilla.org/zh-CN/docs/Web/API/AudioContext

```js
var AudioContext = window.AudioContext || window.webkitAudioContext;
var audioCtx = new AudioContext({latencyHint: 'balanced'});
```

latencyHint: è¿™ä¸ªå‚æ•°è¡¨ç¤ºäº†é‡æ”¾çš„ç±»å‹ï¼Œå‚æ•°æ˜¯æ’­æ”¾æ•ˆæœå’Œèµ„æºæ¶ˆè€—çš„ä¸€ç§æƒè¡¡ã€‚

- "balanced""å¹³è¡¡éŸ³é¢‘è¾“å‡ºå»¶è¿Ÿå’Œèµ„æºæ¶ˆè€—",
- "interactive" "æä¾›æœ€å°çš„éŸ³é¢‘è¾“å‡ºå»¶è¿Ÿæœ€å¥½æ²¡æœ‰å¹²æ‰°"
- "interactive""å¯¹æ¯”éŸ³é¢‘è¾“å‡ºå»¶è¿Ÿï¼Œä¼˜å…ˆé‡æ”¾ä¸è¢«ä¸­æ–­"

```js
const audio = document.querySelector('audio');
audio.onload = () => {
  const source = audioCtx.createMediaElementSource(audio);
};
```

https://developer.mozilla.org/en-US/docs/Web/API/BaseAudioContext/createAnalyser

```js
const analyser = audioCtx.createAnalyser();
analyser.fftSize = 2048;
const bufferLength = analyser.frequencyBinCount;
const dataArray = new Uint8Array(bufferLength);
analyser.getByteTimeDomainData(dataArray);

// draw an oscilloscope of the current audio source

function draw() {
  drawVisual = requestAnimationFrame(draw);

  analyser.getByteTimeDomainData(dataArray);

  canvasCtx.fillStyle = 'rgb(200 200 200)';
  canvasCtx.fillRect(0, 0, WIDTH, HEIGHT);

  canvasCtx.lineWidth = 2;
  canvasCtx.strokeStyle = 'rgb(0 0 0)';

  canvasCtx.beginPath();

  const sliceWidth = (WIDTH * 1.0) / bufferLength;
  let x = 0;

  for (let i = 0; i < bufferLength; i++) {
    const v = dataArray[i] / 128.0;
    const y = (v * HEIGHT) / 2;

    if (i === 0) {
      canvasCtx.moveTo(x, y);
    } else {
      canvasCtx.lineTo(x, y);
    }

    x += sliceWidth;
  }

  canvasCtx.lineTo(canvas.width, canvas.height / 2);
  canvasCtx.stroke();
}

draw();
```

# awesome-canvas

https://github.com/raphamorim/awesome-canvas
https://github.com/chinaBerg/awesome-canvas

# awesome-webgl

https://github.com/sjfricke/awesome-webgl

# webgpu

https://github.com/jinleili/learn-wgpu-zh
https://jinleili.github.io/learn-wgpu-zh/
https://doodlewind.github.io/learn-wgpu-cn/

# WeClone

https://github.com/xming521/weclone

WeClone é€šè¿‡ä¸ªäººå¾®ä¿¡èŠå¤©è®°å½•å¯¹å¤§è¯­è¨€æ¨¡å‹ï¼ˆ LLM ï¼‰è¿›è¡Œå¾®è°ƒï¼Œæ‰“é€ ä¸ªæ€§åŒ–çš„æ•°å­—åˆ†èº«ã€‚

å®ƒæä¾›ä»æ–‡æœ¬ç”Ÿæˆåˆ°è¯­éŸ³å…‹éš†ã€ä»è®­ç»ƒåˆ°éƒ¨ç½²çš„å…¨é“¾è·¯è§£å†³æ–¹æ¡ˆã€‚è®©æ•°å­—åˆ†èº«ä¸ä»…æ›¿ TA è¯´è¯ï¼Œè¿˜å¬èµ·æ¥åƒ TA æœ¬äººã€‚

é™¤äº†ç•™ä½è®°å¿†é‡Œçš„ TAï¼Œä½ ä¹Ÿå¯ä»¥åˆ›é€ è‡ªå·±çš„æ•°å­—åˆ†èº«ã€‚ ä½ æœ‰æ²¡æœ‰æƒ³è¿‡ï¼Œå’Œè‡ªå·±èŠå¤©ä¼šæ˜¯ä»€ä¹ˆæ ·çš„ä½“éªŒï¼Ÿä½ ä¼šå–œæ¬¢å’Œè‡ªå·±èŠå¤©å—ï¼Ÿ

# vue2 provide inject æ•°æ®ä¸åŒæ­¥é—®é¢˜

```js
//çˆ¶çº§
export default {
   provide() {
        return {
            _points: () => this.points,
        };
    },
}
//å­çº§
export default{
  computed: {
        pumpPoints() {
            return this._points();
        },
  }
}
```

# koa å¦‚ä½•åšå¾®æœåŠ¡

https://devops.gitlab.cn/archives/37641

# Electron ä»¥æ…¢è‘—ç§°ï¼Œè…¾è®¯æ–‡æ¡£å´èƒ½å®ç°å†…å­˜ä¼˜åŒ– 60%é™å¹…ï¼Ÿ

https://mp.weixin.qq.com/s/2HWbhFAFLPZlacfBmYQHTw
ä»£ç ç˜¦èº«ï¼Œèµ„æºå¤ç”¨ï¼ŒæŒ‰éœ€åŠ è½½ï¼Œä¼˜åŒ–ç¨‹åºæ•°æ®ç»“æ„ï¼Œè§£å†³å†…å­˜æ³„æ¼

# vue.config.js ä»£ç†å¤±æ•ˆ

https://www.webpackjs.com/configuration/dev-server/#devserverproxy

vue.config çš„è·¯å¾„æ›¿æ¢æ˜¯`pathRewrite`

```js
//vue.config.js
proxy: {
    '/api': {
        target: 'http://localhost:3000',
        //è·¨åŸŸ
        changeOrigin: true,
        //websocket
        ws: true,
        //https
        secure: false,
        //è·¯å¾„æ›¿æ¢
        //localhost:8080/api=>http://localhost:3000/
        pathRewrite: {
            '^/api': ''
        }
    }
}


```

# Page Lifecycle API æ•™ç¨‹

https://www.ruanyifeng.com/blog/2018/11/page_lifecycle_api.html

# æ·±å…¥å¾®æœåŠ¡æ ¸å¿ƒï¼šä»æ¶æ„è®¾è®¡åˆ°è§„æ¨¡åŒ–

https://mp.weixin.qq.com/s/M9hfVaMPeLjER4l3Mi3Eww

# debounce å¯¼è‡´ resize å¤±æ•ˆé—®é¢˜ï¼ŒBaseChart

```vue
<template>
  <div ref="chartRef" class="base-chart"></div>
</template>
<script>
import {debounce} from 'lodash-es';
import * as echarts from 'echarts';
export default {
  name: 'BaseChart',
  props: {
    option: {
      type: Object,
      default: () => ({})
    },
    chartName: {type: String, default: ''}
  },
  data: () => ({
    chart: null,
    resizeObserver: null
  }),
  watch: {
    option: {
      deep: true,
      handler() {
        this.init();
      }
    }
  },
  computed: {
    init() {
      return debounce(this.onInit, 100);
    },
    resize() {
      return debounce(this.onResize, 100);
    }
  },
  mounted() {
    this.$nextTick(() => {
      this.init();
    });
    document.addEventListener('resize', this.resize.bind(this));
    document.addEventListener('fullscreenchange', this.resize.bind(this));
  },
  beforeDestroy() {
    if (this.chart) {
      this.chart.dispose();
    }
    this.chart = null;
    document.removeEventListener('resize', this.resize.bind(this));
    document.removeEventListener('fullscreenchange', this.resize.bind(this));
    if (this.resizeObserver) {
      this.resizeObserver.unobserve(this.$refs.chartRef);
      this.resizeObserver.disconnect();
      this.resizeObserver = null;
    }
  },
  methods: {
    onInit() {
      const dom = this.$refs.chartRef;
      if (!this.chart) {
        this.chart = echarts.init(dom);
        this.resizeObserver = new ResizeObserver(this.resize.bind(this));

        this.resizeObserver.observe(this.$refs.chartRef);
      } else {
        this.chart.clear();
      }

      if (this.option) this.chart.setOption(this.option);
      this.resize();
      console.log('ğŸš€ ~ BaseChart.vue ~ this.option:', this.chartName, this.chart, this.option);
    },

    onResize() {
      if (this.chart) {
        console.log(
          'ğŸš€ ~ BaseChart.vue ~ resize:',
          this.chartName,
          this.$refs.chartRef.offsetWidth,
          this.$refs.chartRef.offsetHeight
        );
        this.chart.resize();
      } else {
        console.log('no chart', this.chartName);
      }
    }
  }
};
</script>
<style>
.base-chart {
  height: 100%;
  width: 100%;
}
</style>
```
