# 唐霜大佬的博客

https://www.tangshuang.net/books

## 基于 DDD 的前端项目架构设计与实战

https://www.tangshuang.net/8663.html

## IndexedDB

https://www.tangshuang.net/3735.html

# MDN IndexedDB

https://developer.mozilla.org/zh-CN/docs/Web/API/IndexedDB_API/Using_IndexedDB

# Timeless

https://www.timelessq.com/article/7

# fluent-ffmpeg

https://creatomate.com/blog/how-to-use-ffmpeg-in-nodejs
https://app.studyraid.com/en/read/12491/403903/what-is-fluent-ffmpeg-and-its-relationship-with-ffmpeg
https://rikhoffbauer.github.io/fluent-ffmpeg-docs/EXAMPLES.html

# ffmpeg-builds

https://www.gyan.dev/ffmpeg/builds/
https://zhuanlan.zhihu.com/p/635915080

# opencv

https://docs.opencv.ac.cn/4.11.0/dd/d00/tutorial_js_video_display.html

# AbortController

https://developer.mozilla.org/zh-CN/docs/Web/API/AbortSignal

取消请求

```js
const controller = new AbortController();
const signal = controller.signal;

fetch(url, {signal})
  .then((response) => {
    console.log('Download complete', response);
  })
  .catch((err) => {
    console.error(`Download error: ${err.message}`);
  });

//取消请求
controller.abort();
```

取消事件监听

```js
const controller = new AbortController();
const signal = controller.signal;
const dom = document.getElementById('btn');
dom.addEventListener(
  'click',
  (event: MouseEvent) => {
    console.log('event', event);
  },
  {
    signal: signal
  }
);

//取消事件监听
controller.abort();
```

请求超时

```js
try {
  const controller = new AbortController();
  const timeoutSignal = AbortSignal.timeout(5000);
  const res = await fetch(url, {
    // 任意一个信号中止时，整个操作会被中止
    signal: AbortSignal.any([controller.signal, timeoutSignal])
  });
  const body = await res.json();
} catch (e) {
  if (e.name === 'AbortError') {
    // 通知用户操作中止
  } else if (e.name === 'TimeoutError') {
    // 通知用户超时
  } else {
    // 网络错误，或其他问题
    console.log(`类型：${e.name}，消息：${e.message}`);
  }
}
```

```js
function myCoolPromiseAPI(/* …, */ {signal}) {
  return new Promise((resolve, reject) => {
    // 如果信号已经被中止，立即抛出错误，以拒绝 promise
    if (signal.aborted) {
      reject(signal.reason);
    }

    // 执行 API 主要的目标
    // 当完成时调用 resolve(result)

    // 监听 'abort' 信号
    signal.addEventListener('abort', () => {
      // 停止主要任务
      // 以中止理由拒绝 promise
      reject(signal.reason);
    });
  });
}
```

# 浏览器 API 技巧

https://juejin.cn/post/7537913159111983154?share_token=14421739-b81e-46aa-93ba-d4d72548c699

Web Share API —— 一键唤起系统分享

```ts
if (navigator.share) {
  navigator.share({
    title: '我的新文章',
    text: '快来看看',
    url: location.href
  });
}
```

Broadcast Channel —— 跨标签页通信

```ts
const bc = new BroadcastChannel('login');
bc.postMessage({token: 'abc123'});
bc.onmessage = (e) => console.log(e.data);
```

Page Visibility API —— 页面“隐身”探测

```ts
document.addEventListener('visibilitychange', () => {
  document.visibilityState === 'hidden' ? video.pause() : video.play();
});
```

Intl.NumberFormat —— 一键千分位

```ts
new Intl.NumberFormat('zh-CN').format(1234567); // 1,234,567
```

IntersectionObserver —— 懒加载 + 曝光埋点

```ts
const io = new IntersectionObserver((entries) => {
  entries.forEach((e) => e.isIntersecting && loadImg(e.target));
});
io.observe(img);
```

ResizeObserver —— 元素级尺寸监听

```ts
const ro = new ResizeObserver((entries) => {
  entries.forEach((e) => console.log('尺寸变化', e.contentRect));
});
ro.observe(chartContainer);
```

Clipboard API —— 无依赖复制

```ts
await navigator.clipboard.writeText('COUPON2025');
```

URLSearchParams —— 再也不用正则解析 query

```ts
const params = new URLSearchParams(location.search);
params.get('id'); // ?id=123
```

AbortController —— 可取消的 fetch

```ts
const controller = new AbortController();
fetch(url, {signal: controller.signal});
controller.abort(); // 立即中断
```

requestIdleCallback —— 主线程垃圾时间调度器

```ts
requestIdleCallback(() => {
  // 在主线程空闲时执行
});
```

# Webgl Tutorial

https://wikis.khronos.org/webgl/Tutorial
https://wikis.khronos.org/webgl/Demo_Repository

# 位置锚点

https://developer.mozilla.org/en-US/docs/Web/CSS/Reference/Properties/position-anchor
···css
input::-webkit-slider-thumb {
anchor-name: --thumb;
}

output {
position-anchor: --thumb;
position: absolute;
left: anchor(right);
bottom: anchor(top);
}
···

```js
const input = document.querySelector('input');
const output = document.querySelector('output');

input.addEventListener('input', (event) => {
  output.innerText = `${input.value}`;
});
```

多个锚点

```css
#anchor1 {
  anchor-name: --my-anchor1, --my-anchor2;
}

#infobox1 {
  position-anchor: --my-anchor1;
  position: fixed;
  left: anchor(right);
  align-self: anchor-center;
  margin-left: 10px;
}

#infobox2 {
  position-anchor: --my-anchor2;
  position: fixed;
  bottom: anchor(top);
  justify-self: anchor-center;
  margin-bottom: 15px;
}
```

# 位置区域

https://developer.mozilla.org/en-US/docs/Web/CSS/Reference/Properties/position-area

```css
.anchor {
  anchor-name: --my-anchor;
}

.infobox {
  position-anchor: --my-anchor;
  position: fixed;
  opacity: 0.8;
  position-area: top left;
}
```

# 文本方向 writing-mode

垂直，横向，从左到右，从右到左

```css
writing-mode: horizontal-tb;
writing-mode: vertical-rl;
writing-mode: vertical-lr;
writing-mode: sideways-rl;
writing-mode: sideways-lr;
```

# will-change

```css
will-change: auto;
will-change: scroll-position;
will-change: contents;
will-change: transform; /* Example of <custom-ident> */
will-change: opacity; /* Example of <custom-ident> */
will-change: left, top; /* Example of two <animatable-feature> */
```

# gif.js

https://vs9.top/posts/deep-dive-gifjs-frontend-animation-tool/

# redis

```sh
redis-server.exe redis.windows.conf

卸载服务：redis-server --service-uninstall

开启服务：redis-server --service-start

停止服务：redis-server --service-stop
```

`requirepass`设置密码

## ioredis

https://ioredis.readthedocs.io/en/stable/README/#basic-usage

# electron-vite

https://docs.ffffee.com/electron/electron-vite/electron-vite-quick-start.html
https://vite.electron.js.cn/guide/templates.html
调试
chrome://inspect/#devices

# CSS 锚点定位

https://mdn.org.cn/en-US/docs/Web/CSS/CSS_anchor_positioning
https://mdn.org.cn/en-US/docs/Web/CSS/CSS_anchor_positioning/Using
https://mdn.org.cn/en-US/docs/Web/CSS/CSS_anchor_positioning/Try_options_hiding
